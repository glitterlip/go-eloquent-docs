<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Query Builder | Go Eloquent</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="http://localhost:4000/database/query_builder.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="http://localhost:4000/database/query_builder">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="/css/navy.css">

  <!-- endbuild -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-lato@0.0.75/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/atom.xml" title="Go Eloquent" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="IntroductionQuery builder provides a convenient, fluent interface to creating and running database queries. Running Database QueriesLike we metioned before, while using query builder, you can pass by">
<meta property="og:type" content="website">
<meta property="og:title" content="Query Builder">
<meta property="og:url" content="http://localhost:4000/database/query_builder">
<meta property="og:site_name" content="Go Eloquent">
<meta property="og:description" content="IntroductionQuery builder provides a convenient, fluent interface to creating and running database queries. Running Database QueriesLike we metioned before, while using query builder, you can pass by">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-08-16T08:42:02.280Z">
<meta property="article:modified_time" content="2022-08-16T08:42:02.280Z">
<meta property="article:author" content="GlitterLip">
<meta name="twitter:card" content="summary">
  <!-- Google Analytics -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-6482217598104186",
          enable_page_level_ads: true
     });
  </script>
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/" id="logo">Hexo</a>
    </h1>
    <nav id="main-nav">
      <a href="/database/" class="main-nav-link">Database</a><a href="/model/" class="main-nav-link">Model</a><a href="/about/" class="main-nav-link">About</a>
      <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/" class="main-nav-link"><i class="fa fa-github-alt"></i></a>
      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <div id="lang-select-wrap">
      <label id="lang-select-label"><i class="fa fa-globe"></i><span>English</span></label>
      <select id="lang-select" data-canonical="">
        
          <option value="en" selected>English</option>
        
      </select>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">Query Builder</h1>
                <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/hexojs/site/edit/master/source/database/query_builder.md" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <h2 id="Introduction" class="article-heading"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction<a class="article-anchor" href="#Introduction" aria-hidden="true"></a></h2><p>Query builder provides a convenient, fluent interface to creating and running database queries.</p>
<h2 id="Running-Database-Queries" class="article-heading"><a href="#Running-Database-Queries" class="headerlink" title="Running Database Queries"></a>Running Database Queries<a class="article-anchor" href="#Running-Database-Queries" aria-hidden="true"></a></h2><p>Like we metioned before, while using query builder, you can pass by 4 kinds of pointer as destition.They are</p>
<ol>
<li>pointer of map</li>
<li>pointer of slice of map</li>
<li>pointer of struct</li>
<li>pointer of slice of struct</li>
</ol>
<h3 id="Retrieving-All-Rows-From-A-Table" class="article-heading"><a href="#Retrieving-All-Rows-From-A-Table" class="headerlink" title="Retrieving All Rows From A Table"></a>Retrieving All Rows From A Table<a class="article-anchor" href="#Retrieving-All-Rows-From-A-Table" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type ChatUser struct &#123;</span><br><span class="line">	Id   int    `goelo:&quot;column:id;primaryKey&quot;`</span><br><span class="line">	Name string `goelo:&quot;column:user_name;&quot;`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var usersMap []map[string]interface&#123;&#125;</span><br><span class="line">var usersStruct []ChatUser</span><br><span class="line">DB.Connection(&quot;chat&quot;).Table(&quot;users&quot;).Get(&amp;usersMap, &quot;id&quot;, &quot;user_name&quot;)</span><br><span class="line">DB.Connection(&quot;chat&quot;).Table(&quot;users&quot;).Get(&amp;usersStruct, &quot;id&quot;, &quot;user_name&quot;)</span><br><span class="line">//select `id`,`user_name` from `users` [] &#123;23&#125; 66.375062ms</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>First we define a struct <code>ChatUser</code>,then we use <code>chat</code> connection , and get records from table <code>users</code>.</p>
<p>Depends on the type of the destination parameter in <code>Get</code> function,if it’s a map , we auto convert it.</p>
<p>If it’s a struct ,we will convert the filed to desired type and assign it.</p>
<p>Every struct field that has a <code>goelo:&quot;column:column_name&quot;</code> tag will be treated as a database table column.</p>
<p>Like in Laravel ,you can pass by addtional database column names to decide columns be selected.</p>
<blockquote class="note info"><strong class="note-title">Note</strong><p> You will find a comment under each query, it’s logger print func that we set before. It’s<br>a <code>goeloquent.Log</code> struct, include</p>
<ol>
<li>sql string we just executed</li>
<li>sql binding parameters ([]interface{})</li>
<li><code>sql.Result</code> with a count of affected/retrived rows</li>
<li><code>time.Duration</code> in milliseconds , we use a remote databse to develop,so it include network time. </li>
</ol>
</blockquote>

<p>If you use <code>default</code> connection , you can just use <code>DB.Table(&quot;users&quot;).Get(&amp;userStructs)</code> to get records without specify<br>the connection!</p>
<h4 id="map-mapping" class="article-heading"><a href="#map-mapping" class="headerlink" title="map mapping"></a>map mapping<a class="article-anchor" href="#map-mapping" aria-hidden="true"></a></h4><p>you might notice when use map as a destination,strings in database will be converted to a <code>[]uint8</code><br>use <code>Mapping</code> method to solve it</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">DB.Connection(<span class="string">&quot;chat&quot;</span>).Table(<span class="string">&quot;users&quot;</span>).Mapping(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line">		<span class="string">&quot;id&quot;</span>:        <span class="type">int</span>(<span class="number">0</span>),</span><br><span class="line">		<span class="string">&quot;user_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">&#125;).Get(&amp;usersMap, <span class="string">&quot;id&quot;</span>, <span class="string">&quot;user_name&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Retrieving-A-Single-Row-Column-From-A-Table" class="article-heading"><a href="#Retrieving-A-Single-Row-Column-From-A-Table" class="headerlink" title="Retrieving A Single Row / Column From A Table"></a>Retrieving A Single Row / Column From A Table<a class="article-anchor" href="#Retrieving-A-Single-Row-Column-From-A-Table" aria-hidden="true"></a></h3><p>You might just need one single row, use <code>First</code>.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).Where(&quot;username&quot;,&quot;john&quot;).First(&amp;john)</span><br><span class="line">//&#123;select * from `users` where `username` = ? limit 1 [john] &#123;1&#125; 68.820758ms&#125;</span><br></pre></td></tr></table></figure>
<p>If you don’t need entire row,just a column value ,use <code>Value</code>.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var email string</span><br><span class="line">DB.Table(&quot;users&quot;).Where(&quot;username&quot;,&quot;john&quot;).Value(&amp;email,&quot;email&quot;)</span><br><span class="line">//&#123;select `email` from `users` where `username` = ? [john] &#123;1&#125; 73.392676ms&#125;</span><br><span class="line">fmt.Println(email)</span><br><span class="line">//john@hotmail.com</span><br></pre></td></tr></table></figure>
<p>Use <code>Find</code> to get a row by <code>id</code></p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> id4 ChatUser</span><br><span class="line">DB.Table(<span class="string">&quot;users&quot;</span>).Find(&amp;id4,<span class="number">4</span>)</span><br><span class="line"><span class="comment">//&#123;select * from `users` where `id` in (?) limit 1 [4] &#123;1&#125; 63.692909ms&#125;</span></span><br><span class="line">fmt.Println(id4)</span><br><span class="line"><span class="comment">//&#123;4  &#123;john@hotmail.com true&#125; &#123; false&#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Even more ,like Laravel</span></span><br><span class="line"><span class="keyword">var</span> findMore []ChatUser</span><br><span class="line">DB.Table(<span class="string">&quot;users&quot;</span>).Find(&amp;findMore,[]<span class="keyword">interface</span>&#123;&#125;&#123;<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>&#125;)</span><br><span class="line"><span class="comment">//&#123;select * from `users` where `id` in (?,?,?) [4 6 8] &#123;3&#125; 68.072428ms&#125;</span></span><br><span class="line">fmt.Println(findMore)</span><br><span class="line"><span class="comment">//[&#123;4  &#123;john@hotmail.com true&#125; &#123; false&#125;&#125; &#123;6  &#123;john@apple.com true&#125; &#123; false&#125;&#125; &#123;8  &#123;john@yahoo.com true&#125; &#123; false&#125;&#125;]</span></span><br></pre></td></tr></table></figure>
<p>As you can see ,<code>Find</code> can take a slice to <code>Find</code> mutiple records.</p>
<h3 id="Retrieving-A-List-Of-Column-Values" class="article-heading"><a href="#Retrieving-A-List-Of-Column-Values" class="headerlink" title="Retrieving A List Of Column Values"></a>Retrieving A List Of Column Values<a class="article-anchor" href="#Retrieving-A-List-Of-Column-Values" aria-hidden="true"></a></h3><p>You can use <code>Pluck</code> to get a list of a single column</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> titles []<span class="type">string</span></span><br><span class="line">DB.Table(<span class="string">&quot;posts&quot;</span>).Pluck(&amp;tites,<span class="string">&quot;title&quot;</span>)</span><br><span class="line"><span class="comment">//&#123;select `path` from `images` [] &#123;3&#125; 71.442575ms&#125;</span></span><br><span class="line">fmt.Println(paths)</span><br><span class="line"><span class="comment">//[/images1.jpg /images2.jpg /img3.png]</span></span><br></pre></td></tr></table></figure>

<h2 id="Chunking-Results" class="article-heading"><a href="#Chunking-Results" class="headerlink" title="Chunking Results"></a>Chunking Results<a class="article-anchor" href="#Chunking-Results" aria-hidden="true"></a></h2><h3 id="Chunk" class="article-heading"><a href="#Chunk" class="headerlink" title="Chunk"></a>Chunk<a class="article-anchor" href="#Chunk" aria-hidden="true"></a></h3><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">err = DB.Table(<span class="string">&quot;users&quot;</span>).OrderBy(<span class="string">&quot;id&quot;</span>).Chunk(&amp;[]User&#123;&#125;, <span class="number">10</span>, <span class="function"><span class="keyword">func</span><span class="params">(dest <span class="keyword">interface</span>&#123;&#125;)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">    us := dest.(*[]User)</span><br><span class="line">    <span class="keyword">for</span> _, user := <span class="keyword">range</span> *us &#123;</span><br><span class="line">        fmt.Println(user)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="ChunkById" class="article-heading"><a href="#ChunkById" class="headerlink" title="ChunkById"></a>ChunkById<a class="article-anchor" href="#ChunkById" aria-hidden="true"></a></h3><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">err = DB.Table(<span class="string">&quot;users&quot;</span>).ChunkById(&amp;[]User&#123;&#125;, <span class="number">10</span>, <span class="function"><span class="keyword">func</span><span class="params">(dest <span class="keyword">interface</span>&#123;&#125;)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">    us := dest.(*[]User)</span><br><span class="line">    <span class="keyword">for</span> _, user := <span class="keyword">range</span> *us &#123;</span><br><span class="line">        fmt.Println(user)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Aggregates" class="article-heading"><a href="#Aggregates" class="headerlink" title="Aggregates"></a>Aggregates<a class="article-anchor" href="#Aggregates" aria-hidden="true"></a></h2><p>We have <code>count,max,min,avg,sum</code> aggregate methods.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var total,avg,max,sum,min float64</span><br><span class="line">DB.Connection(&quot;default&quot;).Model(&amp;DefaultUser&#123;&#125;).Where(&quot;age&quot;,&quot;&gt;&quot;,20).Count(&amp;total, &quot;balance&quot;)</span><br><span class="line">//&#123;select count(`balance`) as aggregate from `users` where `age` &gt; ? [20] &#123;1&#125; 69.96036ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Connection(&quot;default&quot;).Model(&amp;DefaultUser&#123;&#125;).Max(&amp;max, &quot;balance&quot;)</span><br><span class="line">//&#123;select max(`balance`) as aggregate from `users` [] &#123;1&#125; 72.807184ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Connection(&quot;default&quot;).Model(&amp;DefaultUser&#123;&#125;).Min(&amp;min, &quot;balance&quot;)</span><br><span class="line">//&#123;select min(`balance`) as aggregate from `users` [] &#123;1&#125; 64.839132ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Connection(&quot;default&quot;).Model(&amp;DefaultUser&#123;&#125;).Sum(&amp;sum, &quot;balance&quot;)</span><br><span class="line">//&#123;select sum(`balance`) as aggregate from `users` [] &#123;1&#125; 78.220135ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Connection(&quot;default&quot;).Model(&amp;DefaultUser&#123;&#125;).Avg(&amp;avg, &quot;balance&quot;)</span><br><span class="line">//&#123;select avg(`balance`) as aggregate from `users` [] &#123;1&#125; 94.77536ms&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(total)//10</span><br><span class="line">fmt.Println(min)//0</span><br><span class="line">fmt.Println(sum)//1600</span><br><span class="line">fmt.Println(max)//100</span><br><span class="line">fmt.Println(avg)//53.3333</span><br></pre></td></tr></table></figure>

<h2 id="Select-Statements" class="article-heading"><a href="#Select-Statements" class="headerlink" title="Select Statements"></a>Select Statements<a class="article-anchor" href="#Select-Statements" aria-hidden="true"></a></h2><h3 id="Specifying-A-Select-Clause" class="article-heading"><a href="#Specifying-A-Select-Clause" class="headerlink" title="Specifying A Select Clause"></a>Specifying A Select Clause<a class="article-anchor" href="#Specifying-A-Select-Clause" aria-hidden="true"></a></h3><p>You can use <code>Select</code> to specify which column to select</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var m = make(map[string]interface&#123;&#125;)</span><br><span class="line">DB.Connection(&quot;chat&quot;).Table(&quot;users&quot;).Select(&quot;id&quot;,&quot;phone&quot;,&quot;location&quot;).First(&amp;m)</span><br><span class="line">DB.Connection(&quot;chat&quot;).Table(&quot;users&quot;).First(&amp;m,&quot;id&quot;,&quot;phone&quot;,&quot;location&quot;)</span><br><span class="line">//&#123;select `id`,`phone`,`location` from `users` limit 1 [] &#123;1&#125; 62.829325ms&#125;</span><br></pre></td></tr></table></figure>

<p>The distinct method allows you to force the query to return distinct results:</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">DB.Distinct().Select(<span class="string">&quot;name&quot;</span>).From(<span class="string">&quot;users&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>If you already have a query builder instance and you wish to add a column to its existing select clause, you may use the<br>addSelect method:</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">DB.Select(<span class="string">&quot;foo&quot;</span>).AddSelect(<span class="string">&quot;bar&quot;</span>).AddSelect(<span class="string">&quot;baz&quot;</span>, <span class="string">&quot;boom&quot;</span>).From(<span class="string">&quot;users&quot;</span>)</span><br><span class="line"><span class="comment">//&quot;select `foo`, `bar`, `baz`, `boom` from `users`&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="Raw-Expressions" class="article-heading"><a href="#Raw-Expressions" class="headerlink" title="Raw Expressions"></a>Raw Expressions<a class="article-anchor" href="#Raw-Expressions" aria-hidden="true"></a></h2><p>In <code>Select,Where,GroupBy,OrderBy,Having</code>,you can pass by a <code>Expression</code> . **This could lead to SQL injection **</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">DB.Table(<span class="string">&quot;codes&quot;</span>).Where(<span class="string">&quot;user_id&quot;</span>, userid).GroupBy(<span class="string">&quot;code_type&quot;</span>).Mapping(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line">		<span class="string">&quot;type&quot;</span>: <span class="number">0</span>,</span><br><span class="line">		<span class="string">&quot;num&quot;</span>:  <span class="number">0</span>,</span><br><span class="line">	&#125;).Get(&amp;codes, goeloquent.Expression(<span class="string">&quot;code_type as type,count(1) as num&quot;</span>))</span><br></pre></td></tr></table></figure>

<h3 id="Raw-Methods" class="article-heading"><a href="#Raw-Methods" class="headerlink" title="Raw Methods"></a>Raw Methods<a class="article-anchor" href="#Raw-Methods" aria-hidden="true"></a></h3><h4 id="SelectRaw" class="article-heading"><a href="#SelectRaw" class="headerlink" title="SelectRaw"></a>SelectRaw<a class="article-anchor" href="#SelectRaw" aria-hidden="true"></a></h4><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">DB.From(<span class="string">&quot;orders&quot;</span>).SelectRaw(<span class="string">&quot;price * ? as price_with_tax&quot;</span>, []<span class="keyword">interface</span>&#123;&#125;&#123;<span class="number">1.1</span>&#125;)</span><br><span class="line"><span class="comment">//&quot;select price * ? as price_with_tax from `orders`&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="WhereRaw-OrWhereRaw" class="article-heading"><a href="#WhereRaw-OrWhereRaw" class="headerlink" title="WhereRaw/OrWhereRaw"></a>WhereRaw/OrWhereRaw<a class="article-anchor" href="#WhereRaw-OrWhereRaw" aria-hidden="true"></a></h4><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">DB.Select().From(<span class="string">&quot;users&quot;</span>).WhereRaw(<span class="string">&quot;id = ? or email = ?&quot;</span>, []<span class="keyword">interface</span>&#123;&#125;&#123;<span class="number">1</span>, <span class="string">&quot;foo&quot;</span>&#125;)</span><br><span class="line"><span class="string">&quot;select * from `users` where id = ? or email = ?&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="HavingRaw-OrHavingRaw" class="article-heading"><a href="#HavingRaw-OrHavingRaw" class="headerlink" title="HavingRaw/OrHavingRaw"></a>HavingRaw/OrHavingRaw<a class="article-anchor" href="#HavingRaw-OrHavingRaw" aria-hidden="true"></a></h4><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">DB.Select().From(<span class="string">&quot;users&quot;</span>).HavingRaw(<span class="string">&quot;user_foo &lt; user_bar&quot;</span>)</span><br><span class="line"><span class="comment">//&quot;select * from `users` having user_foo &lt; user_bar&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="OrderByRaw" class="article-heading"><a href="#OrderByRaw" class="headerlink" title="OrderByRaw"></a>OrderByRaw<a class="article-anchor" href="#OrderByRaw" aria-hidden="true"></a></h4><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">DB.Select().From(<span class="string">&quot;users&quot;</span>).OrderBy(<span class="string">&quot;email&quot;</span>).OrderByRaw(<span class="string">&quot;`age` ? desc&quot;</span>, []<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;foo&quot;</span>&#125;)</span><br><span class="line"><span class="string">&quot;select * from `users` order by `email` asc, `age` ? desc&quot;</span>, sql)</span><br></pre></td></tr></table></figure>

<h4 id="GroupByRaw" class="article-heading"><a href="#GroupByRaw" class="headerlink" title="GroupByRaw"></a>GroupByRaw<a class="article-anchor" href="#GroupByRaw" aria-hidden="true"></a></h4><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">DB.Select().From(<span class="string">&quot;users&quot;</span>).GroupByRaw(<span class="string">&quot;DATE(created_at), ? DESC&quot;</span>, []<span class="keyword">interface</span>&#123;&#125;&#123;<span class="string">&quot;foo&quot;</span>&#125;)</span><br><span class="line"><span class="string">&quot;select * from `users` group by DATE(created_at), ? DESC&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="Joins" class="article-heading"><a href="#Joins" class="headerlink" title="Joins"></a>Joins<a class="article-anchor" href="#Joins" aria-hidden="true"></a></h2><p>When use join, you can scan the result into map or struct</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> UserWithAddress <span class="keyword">struct</span> &#123;</span><br><span class="line">    Id       <span class="type">int64</span></span><br><span class="line">    Age      <span class="type">int</span></span><br><span class="line">    Name     <span class="type">string</span></span><br><span class="line">    Country  <span class="type">string</span></span><br><span class="line">    Province <span class="type">string</span> <span class="string">`goelo:&quot;column:state&quot;`</span></span><br><span class="line">    City     <span class="type">string</span></span><br><span class="line">    Address  <span class="type">string</span> <span class="string">`goelo:&quot;column:detail&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//dest is struct</span></span><br><span class="line"><span class="keyword">var</span> u UserWithAddress</span><br><span class="line"></span><br><span class="line">DB.From(<span class="string">&quot;user&quot;</span>).Select(<span class="string">&quot;user.id as id&quot;</span>, <span class="string">&quot;user.age as age&quot;</span>, <span class="string">&quot;user.name as name&quot;</span>).</span><br><span class="line">AddSelect(<span class="string">&quot;address.country as country&quot;</span>, <span class="string">&quot;address.state as state&quot;</span>, <span class="string">&quot;address.city as city&quot;</span>, <span class="string">&quot;address.detail as detail&quot;</span>).</span><br><span class="line">Join(<span class="string">&quot;address&quot;</span>, <span class="string">&quot;user.id&quot;</span>, <span class="string">&quot;address.user_id&quot;</span>).First(&amp;u)</span><br><span class="line"><span class="comment">//&#123;select `user`.`id` as `id`, `user`.`age` as `age`, `user`.`name` as `name`, `address`.`country` as `country`, `address`.`state` as `state`, `address`.`city` as `city`, `address`.`detail` as `detail` from `user` inner join `address` on `user`.`id` = `address`.`user_id` limit 1 [] &#123;1&#125; 83.980292ms&#125;</span></span><br><span class="line">joinMap := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">DB.Query().From(<span class="string">&quot;user&quot;</span>).Select(<span class="string">&quot;user.*&quot;</span>).</span><br><span class="line">AddSelect(<span class="string">&quot;address.*&quot;</span>).</span><br><span class="line">Join(<span class="string">&quot;address&quot;</span>, <span class="string">&quot;user.id&quot;</span>, <span class="string">&quot;address.user_id&quot;</span>).First(&amp;joinMap)</span><br><span class="line"><span class="comment">//&#123;select `user`.*, `address`.* from `user` inner join `address` on `user`.`id` = `address`.`user_id` limit 1 [] &#123;1&#125; 83.479ms&#125;</span></span><br><span class="line"></span><br><span class="line">DB.Query().From(<span class="string">&quot;user&quot;</span>).Select(<span class="string">&quot;user.*&quot;</span>).Where(<span class="string">&quot;user.id&quot;</span>,uid).</span><br><span class="line">			AddSelect(<span class="string">&quot;address.*&quot;</span>).</span><br><span class="line">			Join(<span class="string">&quot;address&quot;</span>, <span class="string">&quot;user.id&quot;</span>, <span class="string">&quot;address.user_id&quot;</span>).First(&amp;joinMap)</span><br></pre></td></tr></table></figure>

<p>Rememer specify the column name with table name in where clause We also have <code>LeftJoin/RightJoin/CrossJoin</code></p>
<p>Here are some advanced examples</p>
<figure class="highlight golang"><table><tr><td class="code"><pre><span class="line"><span class="comment">//WhereNull</span></span><br><span class="line">DB.Select().From(<span class="string">&quot;users&quot;</span>).Join(<span class="string">&quot;contacts&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(clasuse *goeloquent.Builder)</span></span> &#123;</span><br><span class="line">		clasuse.On(<span class="string">&quot;users.id&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="string">&quot;contacts.id&quot;</span>).WhereNull(<span class="string">&quot;contacts.deleted_at&quot;</span>)</span><br><span class="line">	&#125;)</span><br><span class="line"><span class="comment">// &quot;select * from `users` inner join `contacts` on `users`.`id` = `contacts`.`id` and `contacts`.`deleted_at` is null&quot;</span></span><br><span class="line"><span class="comment">//WhereIn</span></span><br><span class="line">DB.Select().From(<span class="string">&quot;users&quot;</span>).Join(<span class="string">&quot;contacts&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(clasuse *goeloquent.Builder)</span></span> &#123;</span><br><span class="line">		clasuse.On(<span class="string">&quot;users.id&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="string">&quot;contacts.id&quot;</span>).WhereIn(<span class="string">&quot;contacts.name&quot;</span>, []<span class="keyword">interface</span>&#123;&#125;&#123;<span class="number">48</span>, <span class="string">&quot;baz&quot;</span>, <span class="literal">nil</span>&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"><span class="comment">//&quot;select * from `users` inner join `contacts` on `users`.`id` = `contacts`.`id` and `contacts`.`name` in (?,?,?)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//JoinNested</span></span><br><span class="line">DB.Select().From(<span class="string">&quot;users&quot;</span>).LeftJoin(<span class="string">&quot;contacts&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(clasuse *goeloquent.Builder)</span></span> &#123;</span><br><span class="line">		clasuse.On(<span class="string">&quot;users.id&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="string">&quot;contacts.id&quot;</span>).Where(<span class="string">&quot;contacts.is_active&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="number">1</span>).OrOn(<span class="function"><span class="keyword">func</span><span class="params">(builder *goeloquent.Builder)</span></span> &#123;</span><br><span class="line">			builder.OrWhere(<span class="function"><span class="keyword">func</span><span class="params">(inner *goeloquent.Builder)</span></span> &#123;</span><br><span class="line">				inner.Where(<span class="string">&quot;contacts.country&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="string">&quot;UK&quot;</span>).OrOn(<span class="string">&quot;contacts.type&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="string">&quot;users.type&quot;</span>)</span><br><span class="line">			&#125;).Where(<span class="function"><span class="keyword">func</span><span class="params">(inner2 *goeloquent.Builder)</span></span> &#123;</span><br><span class="line">				inner2.Where(<span class="string">&quot;contacts.country&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="string">&quot;US&quot;</span>).OrWhereNull(<span class="string">&quot;contacts.is_partner&quot;</span>)</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">	</span><br><span class="line"><span class="comment">//&quot;select * from `users` left join `contacts` on `users`.`id` = `contacts`.`id` and `contacts`.`is_active` = ? or ((`contacts`.`country` = ? or `contacts`.`type` = `users`.`type`) and (`contacts`.`country` = ? or `contacts`.`is_partner` is null))&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//JoinsWithAdvancedSubquery</span></span><br><span class="line">DB.Select(<span class="string">&quot;users.id&quot;</span>, <span class="string">&quot;contacts.id&quot;</span>, <span class="string">&quot;contact_types.id&quot;</span>).From(<span class="string">&quot;users&quot;</span>).LeftJoin(<span class="string">&quot;contacts&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(builder *goeloquent.Builder)</span></span> &#123;</span><br><span class="line">		builder.On(<span class="string">&quot;users.id&quot;</span>, <span class="string">&quot;contacts.id&quot;</span>).Join(<span class="string">&quot;contact_types&quot;</span>, <span class="string">&quot;contacts.contact_type_id&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="string">&quot;contact_types.id&quot;</span>).</span><br><span class="line">			WhereExists(<span class="function"><span class="keyword">func</span><span class="params">(builder1 *goeloquent.Builder)</span></span> &#123;</span><br><span class="line">				builder1.Select().From(<span class="string">&quot;countrys&quot;</span>).WhereColumn(<span class="string">&quot;contacts.country&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="string">&quot;countrys.country&quot;</span>).Join(<span class="string">&quot;planets&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(builder2 *goeloquent.Builder)</span></span> &#123;</span><br><span class="line">					builder2.On(<span class="string">&quot;countrys.planet_id&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="string">&quot;planet.id&quot;</span>).Where(<span class="string">&quot;planet.is_settled&quot;</span>, <span class="string">&quot;=&quot;</span>, <span class="number">1</span>)</span><br><span class="line">				&#125;).Where(<span class="string">&quot;planet.population&quot;</span>, <span class="string">&quot;&gt;=&quot;</span>, <span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line">			&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"><span class="comment">//&quot;select `users`.`id`, `contacts`.`id`, `contact_types`.`id` from `users` left join (`contacts` inner join `contact_types` on `contacts`.`contact_type_id` = `contact_types`.`id`) on `users`.`id` = `contacts`.`id` and exists (select * from `countrys` inner join `planets` on `countrys`.`planet_id` = `planet`.`id` and `planet`.`is_settled` = ? where `contacts`.`country` = `countrys`.`country` and `planet`.`population` &gt;= ?)&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="Unions" class="article-heading"><a href="#Unions" class="headerlink" title="Unions"></a>Unions<a class="article-anchor" href="#Unions" aria-hidden="true"></a></h2><p>developing</p>
<h2 id="Basic-Where-Clauses" class="article-heading"><a href="#Basic-Where-Clauses" class="headerlink" title="Basic Where Clauses"></a>Basic Where Clauses<a class="article-anchor" href="#Basic-Where-Clauses" aria-hidden="true"></a></h2><h3 id="Where" class="article-heading"><a href="#Where" class="headerlink" title="Where"></a>Where<a class="article-anchor" href="#Where" aria-hidden="true"></a></h3><p>Usually <code>Where</code> function takes 4 parameters,it’s column,operator,value,<code>and/or</code> Logical Operator.<br>Default Logical Operator is <code>and</code>,default operator is <code>=</code>.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var userStructSlice1 []DefaultUser</span><br><span class="line">DB.Table(&quot;users&quot;).Where(&quot;age&quot;,&quot;&gt;&quot;,18,goeloquent.BOOLEAN_AND).Where(&quot;balance&quot;,&quot;=&quot;,0,goeloquent.BOOLEAN_AND).Get(&amp;userStructSlice1)</span><br><span class="line">//&#123;select * from `users` where `age` &gt; ? and `balance` = ? [18 0] &#123;1&#125; 64.546997ms&#125;</span><br><span class="line">fmt.Printf(&quot;%#v&quot;,userStructSlice1)</span><br><span class="line">[]main.DefaultUser&#123;main.DefaultUser&#123;Table:&quot;&quot;, Id:6, Age:20, Balance:0, Email:&quot;john@apple.com&quot;, NickName:&quot;test3&quot;&#125;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>You can skip 4th parameter <code>and/or</code> Logical Operator when it’s <code>and</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).Where(&quot;age&quot;,&quot;&gt;&quot;,18).Where(&quot;balance&quot;,&quot;=&quot;,0).Get(&amp;userStructSlice1)</span><br><span class="line">//select * from `users` where `age` &gt; ? and `balance` = ? [18 0] &#123;2&#125; 62.012133ms</span><br></pre></td></tr></table></figure>

<p>You can skip 2nd parameter when it’s <code>=</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).Where(&quot;age&quot;,&quot;&gt;&quot;,18).Where(&quot;balance&quot;,0).Get(&amp;userStructSlice1)</span><br><span class="line">//select * from `users` where `age` &gt; ? and `balance` = ? [18 0] &#123;2&#125; 62.202419ms</span><br></pre></td></tr></table></figure>

<h4 id="map-string-interface" class="article-heading"><a href="#map-string-interface" class="headerlink" title="map[string]interface"></a><code>map[string]interface</code><a class="article-anchor" href="#map-string-interface" aria-hidden="true"></a></h4><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">DB.From(<span class="string">&quot;users&quot;</span>).Where(<span class="string">&quot;is_admin&quot;</span>, <span class="number">1</span>).Where(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line">		<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Joe&quot;</span>, <span class="string">&quot;location&quot;</span>: <span class="string">&quot;LA&quot;</span>,</span><br><span class="line">&#125;, goeloquent.BOOLEAN_OR)</span><br><span class="line"><span class="comment">//&quot;select * from `users` where `is_admin` = ? or (`name` = ? and `location` = ?)&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="interface" class="article-heading"><a href="#interface" class="headerlink" title="[][]interface{}"></a><code>[][]interface&#123;&#125;</code><a class="article-anchor" href="#interface" aria-hidden="true"></a></h4><p>You can pass by a <code>[][]interface&#123;&#125;</code>,each element should be a <code>[]interface</code> containing the four parameters that pass to<br>the <code>where</code> function</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).Where([][]interface&#123;&#125;&#123;</span><br><span class="line">    &#123;&quot;age&quot;, &quot;&gt;&quot;, 18, goeloquent.BOOLEAN_AND&#125;,</span><br><span class="line">    &#123;&quot;balance&quot;, &quot;=&quot;, 0, goeloquent.BOOLEAN_AND&#125;,</span><br><span class="line">&#125;).Get(&amp;userStructSlice1)</span><br><span class="line">//select * from `users` where `age` &gt; ? and `balance` = ? [18 0] &#123;2&#125; 62.523877ms</span><br></pre></td></tr></table></figure>
<p>skip parameters works too</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).Where([][]interface&#123;&#125;&#123;</span><br><span class="line">    &#123;&quot;age&quot;, &quot;&gt;&quot;, 18&#125;,</span><br><span class="line">    &#123;&quot;balance&quot;, 0&#125;,</span><br><span class="line">&#125;).Get(&amp;userStructSlice1)</span><br><span class="line">//select * from `users` where `age` &gt; ? and `balance` = ? [18 0] &#123;2&#125; 61.789099ms</span><br></pre></td></tr></table></figure>
<h2 id="Or-Where-Clauses" class="article-heading"><a href="#Or-Where-Clauses" class="headerlink" title="Or Where Clauses"></a>Or Where Clauses<a class="article-anchor" href="#Or-Where-Clauses" aria-hidden="true"></a></h2><p>For more readable reason,you may want a <code>OrWhere</code> function</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).Where(&quot;age&quot;,&quot;&gt;&quot;,18).OrWhere(&quot;balance&quot;,&quot;=&quot;,0).Get(&amp;userStructSlice1)</span><br><span class="line">select * from `users` where `age` &gt; ? or `balance` = ? [18 0] &#123;24&#125; 62.61687ms</span><br></pre></td></tr></table></figure>

<h2 id="Additional-Where-Clauses" class="article-heading"><a href="#Additional-Where-Clauses" class="headerlink" title="Additional Where Clauses"></a>Additional Where Clauses<a class="article-anchor" href="#Additional-Where-Clauses" aria-hidden="true"></a></h2><h3 id="WhereBetween-OrWhereBetween-WhereNotBetween-OrWhereNotBetween" class="article-heading"><a href="#WhereBetween-OrWhereBetween-WhereNotBetween-OrWhereNotBetween" class="headerlink" title="WhereBetween/OrWhereBetween/WhereNotBetween/OrWhereNotBetween"></a>WhereBetween/OrWhereBetween/WhereNotBetween/OrWhereNotBetween<a class="article-anchor" href="#WhereBetween-OrWhereBetween-WhereNotBetween-OrWhereNotBetween" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).Where(&quot;balance&quot;, &quot;&gt;&quot;, 100).WhereBetween(&quot;age&quot;, []interface&#123;&#125;&#123;18, 35&#125;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `balance` &gt; ? and `age` between ? and ? [100 18 35] &#123;0&#125; 68.290583ms</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).WhereNotBetween(&quot;age&quot;, []interface&#123;&#125;&#123;18, 35&#125;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `age` not between ? and ? [18 35] &#123;23&#125; 69.032302ms</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).Where(&quot;balance&quot;, &quot;&gt;&quot;, 100).OrWhereNotBetween(&quot;age&quot;, []interface&#123;&#125;&#123;18, 35&#125;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `balance` &gt; ? or `age` not between ? and ? [100 18 35] &#123;23&#125; 62.927148ms</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).Where(&quot;balance&quot;, &quot;&gt;&quot;, 100).OrWhereBetween(&quot;age&quot;, []interface&#123;&#125;&#123;18, 35&#125;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `balance` &gt; ? or `age` between ? and ? [100 18 35] &#123;7&#125; 63.241122ms</span><br></pre></td></tr></table></figure>
<h3 id="WhereIn-OrWhereIn-WhereNotIn-OrWhereNotIn" class="article-heading"><a href="#WhereIn-OrWhereIn-WhereNotIn-OrWhereNotIn" class="headerlink" title="WhereIn/OrWhereIn/WhereNotIn/OrWhereNotIn"></a>WhereIn/OrWhereIn/WhereNotIn/OrWhereNotIn<a class="article-anchor" href="#WhereIn-OrWhereIn-WhereNotIn-OrWhereNotIn" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Model(&amp;DefaultUser&#123;&#125;).WhereIn(&quot;id&quot;, []interface&#123;&#125;&#123;1,2,3&#125;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `id` in (?,?,?) [1 2 3] &#123;1&#125; 62.159353ms</span><br><span class="line"></span><br><span class="line">DB.Model(&amp;DefaultUser&#123;&#125;).WhereNotIn(&quot;id&quot;, []interface&#123;&#125;&#123;2,3,4&#125;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `id` not in (?,?,?) [2 3 4] &#123;28&#125; 68.078067ms</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).Where(&quot;username&quot;,&quot;john&quot;).OrWhereIn(&quot;email&quot;, []interface&#123;&#125;&#123;&quot;john@gmail.com&quot;,&quot;john@hotmail.com&quot;,&quot;john@apple.com&quot;,&quot;john@outlook.com&quot;&#125;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `username` = ? or `email` in (?,?,?,?) [john john@gmail.com john@hotmail.com john@apple.com john@outlook.com] &#123;3&#125; 61.692218ms</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).Where(&quot;username&quot;,&quot;joe&quot;).OrWhereNotIn(&quot;email&quot;, []interface&#123;&#125;&#123;&quot;joe@gmail.com&quot;,&quot;joe@hotmail.com&quot;,&quot;joe@apple.com&quot;,&quot;joe@outlook.com&quot;&#125;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `username` = ? or `email` not in (?,?,?,?) [joe joe@gmail.com joe@hotmail.com joe@apple.com joe@outlook.com] &#123;30&#125; 64.416506ms</span><br></pre></td></tr></table></figure>
<h3 id="WhereNull-OrWhereNull-OrWhereNotNull-WhereNotNull" class="article-heading"><a href="#WhereNull-OrWhereNull-OrWhereNotNull-WhereNotNull" class="headerlink" title="WhereNull/OrWhereNull/OrWhereNotNull/WhereNotNull"></a>WhereNull/OrWhereNull/OrWhereNotNull/WhereNotNull<a class="article-anchor" href="#WhereNull-OrWhereNull-OrWhereNotNull-WhereNotNull" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).WhereIn(&quot;id&quot;, []interface&#123;&#125;&#123;1,2,3&#125;).WhereNull(&quot;email&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `id` in (?,?,?) and `email` is null  [1 2 3] &#123;0&#125; 61.984595ms</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).WhereNotIn(&quot;id&quot;, []interface&#123;&#125;&#123;2,3,4&#125;).WhereNotNull(&quot;email&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `id` not in (?,?,?) and `email` is  not null  [2 3 4] &#123;27&#125; 62.228735ms</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).Where(&quot;username&quot;,&quot;john&quot;).OrWhereNull(&quot;email&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `username` = ? or `email` is null  [john] &#123;1&#125; 62.454664ms</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).Where(&quot;username&quot;,&quot;joe&quot;).OrWhereNotNull(&quot;email&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//select * from `users` where `username` = ? or `email` is  not null  [joe] &#123;29&#125; 62.256084ms</span><br></pre></td></tr></table></figure>
<h3 id="WhereDate-WhereMonth-WhereDay-WhereYear-WhereTime" class="article-heading"><a href="#WhereDate-WhereMonth-WhereDay-WhereYear-WhereTime" class="headerlink" title="WhereDate/WhereMonth/WhereDay/WhereYear/WhereTime"></a>WhereDate/WhereMonth/WhereDay/WhereYear/WhereTime<a class="article-anchor" href="#WhereDate-WhereMonth-WhereDay-WhereYear-WhereTime" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var now = time.Now()</span><br><span class="line">fmt.Println(now)</span><br><span class="line">//2021-11-03 16:00:35.461691 +0800 CST m=+0.166644409</span><br><span class="line">DB.Table(&quot;users&quot;).WhereDate(&quot;created_at&quot;, now).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where date(`created_at`) = ? [2021-11-03] &#123;0&#125; 65.800819ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).WhereDate(&quot;created_at&quot;, &quot;2008-01-03&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where date(`created_at`) = ? [2008-01-03] &#123;0&#125; 66.675012ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).WhereDay(&quot;created_at&quot;, now).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where day(`created_at`) = ? [03] &#123;0&#125; 65.159437ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).WhereDay(&quot;created_at&quot;, &quot;06&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where day(`created_at`) = ? [06] &#123;0&#125; 64.92847ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).WhereMonth(&quot;created_at&quot;, now).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where month(`created_at`) = ? [11] &#123;10&#125; 70.454652ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).WhereMonth(&quot;created_at&quot;, &quot;06&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where month(`created_at`) = ? [11] &#123;10&#125; 66.694005ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).WhereYear(&quot;created_at&quot;, now).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where year(`created_at`) = ? [2021] &#123;11&#125; 64.805563ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).WhereYear(&quot;created_at&quot;, &quot;2020&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where year(`created_at`) = ? [2020] &#123;0&#125; 64.970053ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).WhereTime(&quot;created_at&quot;, now).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where time(`created_at`) = ? [16:00:35] &#123;0&#125; 65.73327ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).WhereTime(&quot;created_at&quot;, &quot;3:05:16&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where time(`created_at`) = ? [3:05:16] &#123;0&#125; 66.24917ms&#125;</span><br></pre></td></tr></table></figure>
<h3 id="WhereColumn-OrWhereColumn" class="article-heading"><a href="#WhereColumn-OrWhereColumn" class="headerlink" title="WhereColumn/OrWhereColumn"></a>WhereColumn/OrWhereColumn<a class="article-anchor" href="#WhereColumn-OrWhereColumn" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).WhereColumn(&quot;age&quot;, &quot;=&quot;, &quot;balance&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where `age` = `balance` [] &#123;1&#125; 65.095414ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).Where(&quot;id&quot;,4).OrWhereColumn(&quot;age&quot;, &quot;=&quot;, &quot;balance&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where `id` = ? or `age` = `balance` [4] &#123;2&#125; 66.101059ms&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Logical-Grouping" class="article-heading"><a href="#Logical-Grouping" class="headerlink" title="Logical Grouping"></a>Logical Grouping<a class="article-anchor" href="#Logical-Grouping" aria-hidden="true"></a></h2><p>If you need to group an <code>where</code> condition within parentheses,you can pass by a function to  <code>Where</code> or use <code>WhereNested</code> function</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).Where(&quot;age&quot;, &quot;&gt;&quot;, 30).OrWhere(func(builder *goeloquent.Builder) &#123;</span><br><span class="line">    builder.Where(&quot;age&quot;, &quot;&gt;&quot;, 18)</span><br><span class="line">    builder.Where(&quot;balance&quot;, &quot;&gt;&quot;, 5000)</span><br><span class="line">&#125;).Get(&amp;userStructSlice, &quot;username&quot;, &quot;email&quot;)</span><br><span class="line">//select `username`,`email` from `users` where `age` &gt; ? or (`age` &gt; ? and `balance` &gt; ?) [30 18 5000] &#123;8&#125; 62.204423ms</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).Where(&quot;age&quot;, &quot;&gt;&quot;, 30).WhereNested([][]interface&#123;&#125;&#123;</span><br><span class="line">    &#123;&quot;age&quot;, &quot;&gt;&quot;, 18&#125;,</span><br><span class="line">    &#123;&quot;balance&quot;, &quot;&gt;&quot;, 5000&#125;,</span><br><span class="line">&#125;,goeloquent.BOOLEAN_OR).Get(&amp;userStructSlice, &quot;username&quot;, &quot;email&quot;)</span><br><span class="line">//select `username`,`email` from `users` where `age` &gt; ? or (`age` &gt; ? and `balance` &gt; ?) [30 18 5000] &#123;8&#125; 64.868523ms	</span><br></pre></td></tr></table></figure>
<h2 id="Subquery-Where-Clauses" class="article-heading"><a href="#Subquery-Where-Clauses" class="headerlink" title="Subquery Where Clauses"></a>Subquery Where Clauses<a class="article-anchor" href="#Subquery-Where-Clauses" aria-hidden="true"></a></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).Where(&quot;age&quot;, &quot;&gt;&quot;, 0).WhereSub(&quot;id&quot;,&quot;in&quot;, func(builder *goeloquent.Builder) &#123;</span><br><span class="line">    builder.From(&quot;users&quot;).Where(&quot;balance&quot;,&quot;&gt;&quot;,0).Select(&quot;id&quot;)</span><br><span class="line">    //don&#x27;t use any finisher function like first/find/get/value/pluck,otherwise it will turn into execute two seperated sql </span><br><span class="line">&#125;,goeloquent.BOOLEAN_OR).Get(&amp;userStructSlice)</span><br></pre></td></tr></table></figure>
<h2 id="Conditional-Clauses" class="article-heading"><a href="#Conditional-Clauses" class="headerlink" title="Conditional Clauses"></a>Conditional Clauses<a class="article-anchor" href="#Conditional-Clauses" aria-hidden="true"></a></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Model(&amp;models.User&#123;&#125;).When(false, func(builder *goeloquent.Builder) &#123;</span><br><span class="line">    q.Where(&quot;id&quot;,10)</span><br><span class="line">&#125;).Get(&amp;us)</span><br></pre></td></tr></table></figure>
<h2 id="Ordering-Grouping-Limit-amp-Offset" class="article-heading"><a href="#Ordering-Grouping-Limit-amp-Offset" class="headerlink" title="Ordering, Grouping, Limit &amp; Offset"></a>Ordering, Grouping, Limit &amp; Offset<a class="article-anchor" href="#Ordering-Grouping-Limit-amp-Offset" aria-hidden="true"></a></h2><h3 id="Ordering" class="article-heading"><a href="#Ordering" class="headerlink" title="Ordering"></a>Ordering<a class="article-anchor" href="#Ordering" aria-hidden="true"></a></h3><p>default order is <code>asc</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Table(&quot;users&quot;).Where(&quot;age&quot;, &quot;&gt;&quot;, 0).OrderBy(&quot;balance&quot;,goeloquent.ORDER_DESC).OrderBy(&quot;id&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select * from `users` where `age` &gt; ? order by `balance` desc , `id` asc [0] &#123;24&#125; 73.264891ms&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Grouping" class="article-heading"><a href="#Grouping" class="headerlink" title="Grouping"></a>Grouping<a class="article-anchor" href="#Grouping" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var m []map[string]interface&#123;&#125;</span><br><span class="line">DB.Table(&quot;comments&quot;).GroupBy(&quot;commentable_type&quot;).Get(&amp;m,&quot;commentable_type&quot;,goeloquent.Expression&#123;Value: &quot;count(*) as c&quot;&#125;)</span><br><span class="line">//&#123;select `commentable_type`,count(*) as c from `comments` group by `commentable_type` [] &#123;2&#125; 64.624213ms&#125;</span><br><span class="line">fmt.Println(string(m[0][&quot;commentable_type&quot;].([]byte)))</span><br><span class="line">//post</span><br><span class="line">fmt.Println(m[0][&quot;c&quot;])</span><br><span class="line">//2</span><br></pre></td></tr></table></figure>
<p>When using <code>Select</code> to specify columns, we will quote columns with “<code>&quot; as string, if you want avoid this, use </code>Expression`</p>
<h3 id="Having" class="article-heading"><a href="#Having" class="headerlink" title="Having"></a>Having<a class="article-anchor" href="#Having" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var m []map[string]interface&#123;&#125;</span><br><span class="line">DB.Table(&quot;comments&quot;).GroupBy(&quot;commentable_type&quot;).Having(&quot;c&quot;,&quot;&gt;&quot;,2).Get(&amp;m,&quot;commentable_type&quot;,goeloquent.Expression&#123;Value: &quot;count(*) as c&quot;&#125;)</span><br><span class="line">//&#123;select `commentable_type`,count(*) as c from `comments` group by `commentable_type` having `c` &gt; ? [2] &#123;1&#125; 66.393615ms&#125;</span><br><span class="line">fmt.Println(string(m[0][&quot;commentable_type&quot;].([]byte)))</span><br><span class="line">//video</span><br><span class="line">fmt.Println(m[0][&quot;c&quot;])</span><br><span class="line">//3</span><br></pre></td></tr></table></figure>
<h4 id="HavingBetween" class="article-heading"><a href="#HavingBetween" class="headerlink" title="HavingBetween"></a>HavingBetween<a class="article-anchor" href="#HavingBetween" aria-hidden="true"></a></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var m []map[string]interface&#123;&#125;</span><br><span class="line">DB.Table(&quot;comments&quot;).GroupBy(&quot;commentable_type&quot;).HavingBetween(&quot;c&quot;,[]interface&#123;&#125;&#123;0,3&#125;).Get(&amp;m,&quot;commentable_type&quot;,goeloquent.Expression&#123;Value: &quot;count(*) as c&quot;&#125;)</span><br><span class="line">//&#123;select `commentable_type`,count(*) as c from `comments` group by `commentable_type` having `c` between? and ?  [0 3] &#123;2&#125; 65.1953ms&#125;</span><br><span class="line">fmt.Println(string(m[0][&quot;commentable_type&quot;].([]byte)))</span><br><span class="line">//video</span><br><span class="line">fmt.Println(m[0][&quot;c&quot;])</span><br><span class="line">//3</span><br></pre></td></tr></table></figure>
<h3 id="Limit-amp-Offset" class="article-heading"><a href="#Limit-amp-Offset" class="headerlink" title="Limit &amp; Offset"></a>Limit &amp; Offset<a class="article-anchor" href="#Limit-amp-Offset" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DB.Connection(&quot;chat&quot;).Model(&amp;ChatPkUser&#123;&#125;).Limit(5).Offset(3).Select(&quot;id&quot;,&quot;phone&quot;,&quot;location&quot;).Get(&amp;userStructSlice)</span><br><span class="line">//&#123;select `id`,`phone`,`location` from `users` limit 5 offset 3 [] &#123;5&#125; 76.978184ms&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Insert-Statement" class="article-heading"><a href="#Insert-Statement" class="headerlink" title="Insert Statement"></a>Insert Statement<a class="article-anchor" href="#Insert-Statement" aria-hidden="true"></a></h2><h3 id="Insert-map" class="article-heading"><a href="#Insert-map" class="headerlink" title="Insert map"></a>Insert map<a class="article-anchor" href="#Insert-map" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var userMap = map[string]interface&#123;&#125;&#123;</span><br><span class="line">    &quot;username&quot;: fmt.Sprintf(&quot;%s%d&quot;, &quot;Only&quot;, time.Now().Unix()),</span><br><span class="line">    &quot;balance&quot;:  100,</span><br><span class="line">    &quot;age&quot;:      50,</span><br><span class="line">&#125;</span><br><span class="line">result, err := DB.Table(&quot;users&quot;).Only(&quot;balance&quot;, &quot;username&quot;).Insert(&amp;userMap)</span><br><span class="line">//&#123;insert into `users` ( `username`,`balance` ) values  ( ? , ? )  [Only1635947804 100] &#123;0xc00007a000 0xc00001e160&#125; 78.784832ms&#125;</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    panic(err.Error())</span><br><span class="line">&#125;</span><br><span class="line">insertId, _ := result.LastInsertId()</span><br><span class="line">var inserted = make(map[string]interface&#123;&#125;)</span><br><span class="line">DB.Table(&quot;users&quot;).Where(&quot;id&quot;,insertId).First(&amp;inserted)</span><br><span class="line">//&#123;select * from `users` where `id` = ? limit 1 [162] &#123;1&#125; 67.92676ms&#125;</span><br><span class="line">fmt.Println(inserted)</span><br><span class="line">//map[age:0 balance:100 id:162 username:[79 110 108 121 49 54 51 53 57 52 55 56 48 52]]</span><br></pre></td></tr></table></figure>

<p>While updating/inserting,you can use <code>Only</code> to specify which columns to include ,you can use <code>Except</code> to specify which columns to exclude</p>
<h3 id="Batch-Insert-Map" class="article-heading"><a href="#Batch-Insert-Map" class="headerlink" title="Batch Insert Map"></a>Batch Insert Map<a class="article-anchor" href="#Batch-Insert-Map" aria-hidden="true"></a></h3><p>You can pass by a slice of map to insert several records at once</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s := []map[string]interface&#123;&#125;&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;id&quot;:       1,</span><br><span class="line">        &quot;username&quot;: &quot;userr1&quot;,</span><br><span class="line">        &quot;balance&quot;:  1000,</span><br><span class="line">        &quot;age&quot;:      20,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;username&quot;: &quot;userr2&quot;,</span><br><span class="line">        &quot;balance&quot;:  50000,</span><br><span class="line">        &quot;age&quot;:      50,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">result, err := DB.Table(&quot;users&quot;).Except(&quot;id&quot;).Insert(&amp;s)</span><br><span class="line">//&#123;insert into `users` ( `age`,`username`,`balance` ) values  ( ? , ? , ? )  ,  ( ? , ? , ? )  [20 userr1 1000 50 userr2 50000] &#123;0xc00010c000 0xc00001e160&#125; 86.2694ms&#125;</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    panic(err.Error())</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(result.LastInsertId())</span><br><span class="line">//168 &lt;nil&gt; </span><br><span class="line">fmt.Println(result.RowsAffected())</span><br><span class="line">//2 &lt;nil&gt; </span><br></pre></td></tr></table></figure>
<p>When batch insert,<code>LastInsertId()</code> will return the first record id</p>
<h3 id="Insert-Struct" class="article-heading"><a href="#Insert-Struct" class="headerlink" title="Insert Struct"></a>Insert Struct<a class="article-anchor" href="#Insert-Struct" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">type Post struct &#123;</span><br><span class="line">    Table   string `goelo:&quot;TableName:posts&quot;`</span><br><span class="line">    Id      int64  `goelo:&quot;primaryKey&quot;`</span><br><span class="line">    UserId  int64</span><br><span class="line">    Title   string</span><br><span class="line">    Summary string</span><br><span class="line">    Content string</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(&quot;table struct insert Only&quot;)</span><br><span class="line">var post = Post&#123;</span><br><span class="line">    Id:      10,</span><br><span class="line">    UserId:  2,</span><br><span class="line">    Title:   fmt.Sprintf(&quot;%s%d&quot;, &quot;table struct insert Only&quot;, time.Now().Unix()+1),</span><br><span class="line">    Summary: &quot;Summary&quot;,</span><br><span class="line">    Content: fmt.Sprintf(&quot;%s%d&quot;, &quot;Summary table struct insert Only&quot;, time.Now().Unix()+2),</span><br><span class="line">&#125;</span><br><span class="line">//&#123;insert into `posts` ( `summary`,`content`,`user_id`,`title` ) values  ( ? , ? , ? , ? )  [Summary Summary table struct insert Only1635949167 2 table struct insert Only1635949166] &#123;0xc0000da120 0xc0000b0540&#125; 68.205202ms&#125;</span><br><span class="line">result, err := DB.Table(&quot;posts&quot;).Only(&quot;user_id&quot;, &quot;title&quot;, &quot;content&quot;, &quot;summary&quot;).Insert(&amp;post)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    panic(err.Error())</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(&quot;%#v&quot;,post)</span><br><span class="line">//main.Post&#123;Table:&quot;&quot;, Id:174, UserId:2, Title:&quot;table struct insert Only1635949166&quot;, Summary:&quot;Summary&quot;, Content:&quot;Summary table struct insert Only1635949167&quot;&#125;</span><br><span class="line">fmt.Println(result.LastInsertId())</span><br><span class="line">//174 &lt;nil&gt;</span><br></pre></td></tr></table></figure>
<p>If you add an tag <code>goelo:&quot;primaryKey&quot;</code> on primaryKey field , we will update it for you ,otherwise it is its original value</p>
<h3 id="Batch-Insert-Structs" class="article-heading"><a href="#Batch-Insert-Structs" class="headerlink" title="Batch Insert Structs"></a>Batch Insert Structs<a class="article-anchor" href="#Batch-Insert-Structs" aria-hidden="true"></a></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s := []Post&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        Id:      10,</span><br><span class="line">        UserId:  4,</span><br><span class="line">        Title:   fmt.Sprintf(&quot;%s%d&quot;, &quot;table slice struct insert &quot;, time.Now().Unix()+1),</span><br><span class="line">        Summary: &quot;Summary&quot;,</span><br><span class="line">        Content: fmt.Sprintf(&quot;%s%d&quot;, &quot;table slice struct insert &quot;, time.Now().Unix()+2),</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        Id:      10,</span><br><span class="line">        UserId:  4,</span><br><span class="line">        Title:   fmt.Sprintf(&quot;%s%d&quot;, &quot;table slice struct insert &quot;, time.Now().Unix()+1),</span><br><span class="line">        Summary: &quot;Summary&quot;,</span><br><span class="line">        Content: fmt.Sprintf(&quot;%s%d&quot;, &quot;table slice struct insert &quot;, time.Now().Unix()+2),</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">result, err = DB.Table(&quot;posts&quot;).Except(&quot;id&quot;).Insert(&amp;s)</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    panic(err.Error())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Insert can accept a pointer of slice of struct</p>
<h2 id="Update-Statements" class="article-heading"><a href="#Update-Statements" class="headerlink" title="Update Statements"></a>Update Statements<a class="article-anchor" href="#Update-Statements" aria-hidden="true"></a></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">r, err := DB.Table(&quot;users&quot;).Where([][]interface&#123;&#125;&#123;</span><br><span class="line">    &#123;&quot;age&quot;, 18&#125;,</span><br><span class="line">    &#123;&quot;balance&quot;, 0&#125;,</span><br><span class="line">&#125;).Update(map[string]interface&#123;&#125;&#123;</span><br><span class="line">    &quot;balance&quot;: 100,</span><br><span class="line">&#125;)</span><br><span class="line">//&#123;update `users` set `balance` = ? where `age` = ? and `balance` = ? [100 18 0] &#123;0xc000204000 0xc0002260d0&#125; 80.266387ms&#125;</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    panic(err.Error())</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(r.RowsAffected())</span><br><span class="line">//2 &lt;nil&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Use-Expression" class="article-heading"><a href="#Use-Expression" class="headerlink" title="Use Expression"></a>Use Expression<a class="article-anchor" href="#Use-Expression" aria-hidden="true"></a></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">r, err := DB.Table(&quot;users&quot;).Where([][]interface&#123;&#125;&#123;</span><br><span class="line">    &#123;&quot;age&quot;, 18&#125;,</span><br><span class="line">    &#123;&quot;balance&quot;, &quot;!=&quot;, 0&#125;,</span><br><span class="line">&#125;).Update(map[string]interface&#123;&#125;&#123;</span><br><span class="line">    &quot;balance&quot;: goeloquent.Expression&#123;Value: &quot;balance + 100&quot;&#125;,</span><br><span class="line">&#125;)</span><br><span class="line">//&#123;update `users` set `balance` = balance + 100 where `age` = ? and `balance` != ? [18 0] &#123;0xc0000de120 0xc0000b83a0&#125; 75.251657ms&#125;</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    panic(err.Error())</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(r.RowsAffected())</span><br><span class="line">//2 &lt;nil&gt;</span><br></pre></td></tr></table></figure>
<p>Another Example</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">r, err := DB.Table(&quot;users&quot;).Update(map[string]interface&#123;&#125;&#123;</span><br><span class="line">    &quot;balance&quot;: goeloquent.Expression&#123;Value: &quot;balance + age*100&quot;&#125;,</span><br><span class="line">&#125;)</span><br><span class="line">//&#123;update `users` set `balance` = balance + age*100 [] &#123;0xc000110000 0xc000128090&#125; 68.057742ms&#125;</span><br><span class="line">if err != nil &#123;</span><br><span class="line">    panic(err.Error())</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(r.RowsAffected())</span><br><span class="line">//32 &lt;nil&gt;</span><br></pre></td></tr></table></figure>
<p>You can use <code>Expression</code> to update column base on another column</p>
<h2 id="Delete" class="article-heading"><a href="#Delete" class="headerlink" title="Delete"></a>Delete<a class="article-anchor" href="#Delete" aria-hidden="true"></a></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">r,err:=DB.Table(&quot;users&quot;).Where(&quot;id&quot;,2).Delete()</span><br><span class="line">if err!=nil &#123;</span><br><span class="line">    panic(err.Error())</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(r.RowsAffected())</span><br><span class="line">//&#123; delete from `users` where `id` = ? [2] &#123;0xc000102000 0xc00001e150&#125; 73.972219ms&#125;</span><br><span class="line">//1 &lt;nil&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Pessimistic-Locking" class="article-heading"><a href="#Pessimistic-Locking" class="headerlink" title="Pessimistic Locking"></a>Pessimistic Locking<a class="article-anchor" href="#Pessimistic-Locking" aria-hidden="true"></a></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var us []map[string]interface&#123;&#125;</span><br><span class="line">DB.Table(&quot;users&quot;).LockForUpdate().Where(&quot;id&quot;, &quot;&lt;&quot;, 100).Get(&amp;us)</span><br><span class="line">//&#123;select * from `users` where `id` &lt; ? for update  [100] &#123;16&#125; 66.21529ms&#125;</span><br><span class="line"></span><br><span class="line">DB.Table(&quot;users&quot;).SharedLock().Where(&quot;id&quot;, &quot;&lt;&quot;, 100).Get(&amp;us)</span><br><span class="line">//&#123;select * from `users` where `id` &lt; ? lock in share mode  [100] &#123;16&#125; 67.434753ms&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Debugging" class="article-heading"><a href="#Debugging" class="headerlink" title="Debugging"></a>Debugging<a class="article-anchor" href="#Debugging" aria-hidden="true"></a></h1><h2 id="Get-Logs" class="article-heading"><a href="#Get-Logs" class="headerlink" title="Get Logs"></a>Get Logs<a class="article-anchor" href="#Get-Logs" aria-hidden="true"></a></h2><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">DB.SetLogger(<span class="function"><span class="keyword">func</span><span class="params">(l goeloquent.Log)</span></span> &#123;</span><br><span class="line">    fmt.Println(l)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Dry-Run" class="article-heading"><a href="#Dry-Run" class="headerlink" title="Dry Run"></a>Dry Run<a class="article-anchor" href="#Dry-Run" aria-hidden="true"></a></h2><figure class="highlight golang"><table><tr><td class="code"><pre><span class="line">b4 := DB.Query().Pretend()</span><br><span class="line">b4.From(<span class="string">&quot;users&quot;</span>).Insert(<span class="keyword">map</span>[<span class="type">string</span>]<span class="keyword">interface</span>&#123;&#125;&#123;</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: goeloquent.Raw(<span class="string">&quot;CURRENT TIMESTAMP&quot;</span>),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2022-08-16T08:42:02.280Z" itemprop="dateModified">Last updated: 2022-08-16</time>
                <a href="basic.html" class="article-footer-prev" title="Basic"><i class="fa fa-chevron-left"></i><span>Prev</span></a><a href="pagination.html" class="article-footer-next" title="Pagination"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=hexoio" id="_carbonads_js"></script>
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Running-Database-Queries"><span class="toc-text">Running Database Queries</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Retrieving-All-Rows-From-A-Table"><span class="toc-text">Retrieving All Rows From A Table</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#map-mapping"><span class="toc-text">map mapping</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Retrieving-A-Single-Row-Column-From-A-Table"><span class="toc-text">Retrieving A Single Row &#x2F; Column From A Table</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Retrieving-A-List-Of-Column-Values"><span class="toc-text">Retrieving A List Of Column Values</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Chunking-Results"><span class="toc-text">Chunking Results</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Chunk"><span class="toc-text">Chunk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ChunkById"><span class="toc-text">ChunkById</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Aggregates"><span class="toc-text">Aggregates</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Select-Statements"><span class="toc-text">Select Statements</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Specifying-A-Select-Clause"><span class="toc-text">Specifying A Select Clause</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Raw-Expressions"><span class="toc-text">Raw Expressions</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Raw-Methods"><span class="toc-text">Raw Methods</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SelectRaw"><span class="toc-text">SelectRaw</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WhereRaw-OrWhereRaw"><span class="toc-text">WhereRaw&#x2F;OrWhereRaw</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HavingRaw-OrHavingRaw"><span class="toc-text">HavingRaw&#x2F;OrHavingRaw</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#OrderByRaw"><span class="toc-text">OrderByRaw</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GroupByRaw"><span class="toc-text">GroupByRaw</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Joins"><span class="toc-text">Joins</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Unions"><span class="toc-text">Unions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Basic-Where-Clauses"><span class="toc-text">Basic Where Clauses</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Where"><span class="toc-text">Where</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#map-string-interface"><span class="toc-text">map[string]interface</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#interface"><span class="toc-text">[][]interface{}</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Or-Where-Clauses"><span class="toc-text">Or Where Clauses</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Additional-Where-Clauses"><span class="toc-text">Additional Where Clauses</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#WhereBetween-OrWhereBetween-WhereNotBetween-OrWhereNotBetween"><span class="toc-text">WhereBetween&#x2F;OrWhereBetween&#x2F;WhereNotBetween&#x2F;OrWhereNotBetween</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WhereIn-OrWhereIn-WhereNotIn-OrWhereNotIn"><span class="toc-text">WhereIn&#x2F;OrWhereIn&#x2F;WhereNotIn&#x2F;OrWhereNotIn</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WhereNull-OrWhereNull-OrWhereNotNull-WhereNotNull"><span class="toc-text">WhereNull&#x2F;OrWhereNull&#x2F;OrWhereNotNull&#x2F;WhereNotNull</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WhereDate-WhereMonth-WhereDay-WhereYear-WhereTime"><span class="toc-text">WhereDate&#x2F;WhereMonth&#x2F;WhereDay&#x2F;WhereYear&#x2F;WhereTime</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WhereColumn-OrWhereColumn"><span class="toc-text">WhereColumn&#x2F;OrWhereColumn</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Logical-Grouping"><span class="toc-text">Logical Grouping</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Subquery-Where-Clauses"><span class="toc-text">Subquery Where Clauses</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conditional-Clauses"><span class="toc-text">Conditional Clauses</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ordering-Grouping-Limit-amp-Offset"><span class="toc-text">Ordering, Grouping, Limit &amp; Offset</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Ordering"><span class="toc-text">Ordering</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Grouping"><span class="toc-text">Grouping</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Having"><span class="toc-text">Having</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HavingBetween"><span class="toc-text">HavingBetween</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Limit-amp-Offset"><span class="toc-text">Limit &amp; Offset</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Insert-Statement"><span class="toc-text">Insert Statement</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Insert-map"><span class="toc-text">Insert map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Batch-Insert-Map"><span class="toc-text">Batch Insert Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Insert-Struct"><span class="toc-text">Insert Struct</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Batch-Insert-Structs"><span class="toc-text">Batch Insert Structs</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Update-Statements"><span class="toc-text">Update Statements</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Use-Expression"><span class="toc-text">Use Expression</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delete"><span class="toc-text">Delete</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pessimistic-Locking"><span class="toc-text">Pessimistic Locking</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Debugging"><span class="toc-text">Debugging</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Get-Logs"><span class="toc-text">Get Logs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dry-Run"><span class="toc-text">Dry Run</span></a></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">Getting Started</strong><a href="index.html" class="sidebar-link">Introduction</a><a href="configuration.html" class="sidebar-link">Configuration</a><strong class="sidebar-title">Usage</strong><a href="basic.html" class="sidebar-link">Basic</a><a href="query_builder.html" class="sidebar-link current">Query Builder</a><a href="pagination.html" class="sidebar-link">Pagination</a><a href="transactions.html" class="sidebar-link">Transactions</a>
  </div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2022 <a href="https://github.com/hexojs/hexo/graphs/contributors" rel="external nofollow noreferrer" target="_blank">GlitterLip</a><br>
      Documentation licensed under <a href="http://creativecommons.org/licenses/by/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>.
    </div>
    <div id="footer-links">
      <a href="https://www.netlify.com/" rel="external nofollow noreferrer" class="footer-link" target="_blank"><img src="https://www.netlify.com/img/global/badges/netlify-dark.svg" style="margin-bottom:-14px"/></a>
      <a href="https://twitter.com/" rel="external nofollow noreferrer" class="footer-link" target="_blank"><i class="fa fa-twitter"></i></a>
      <a href="https://github.com/" rel="external nofollow noreferrer" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/database/" class="mobile-nav-link">Database</a><a href="/model/" class="mobile-nav-link">Model</a><a href="/about/" class="mobile-nav-link">About</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Getting Started</strong><a href="index.html" class="mobile-nav-link">Introduction</a><a href="configuration.html" class="mobile-nav-link">Configuration</a><strong class="mobile-nav-title">Usage</strong><a href="basic.html" class="mobile-nav-link">Basic</a><a href="query_builder.html" class="mobile-nav-link current">Query Builder</a><a href="pagination.html" class="mobile-nav-link">Pagination</a><a href="transactions.html" class="mobile-nav-link">Transactions</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- Cookie -->
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<!-- build:js build/js/main.js -->

<script src="/js/lang_select.js"></script>


<script src="/js/mobile_nav.js"></script>

<!-- endbuild -->

<!-- Algolia -->


</body>
</html>